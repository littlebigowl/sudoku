"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e,n){S.style.display="flex",L.style.display="flex",B.style.display="none",J=!0,o(),localStorage.numbersGrid&&localStorage.editableGrid&&localStorage.originalGrid&&n?localStorage.numbersGrid&&localStorage.editableGrid&&localStorage.originalGrid&&(V.numbersGrid=JSON.parse(localStorage.getItem("numbersGrid")),V.isEditableGrid=JSON.parse(localStorage.getItem("editableGrid")),V.originalGrid=JSON.parse(localStorage.getItem("originalGrid")),G(JSON.parse(localStorage.getItem("originalGrid")))):function(e){var n=function(e,n){for(var t=81-n,r=[],i=0;i<81;i++)r[i]=i;for(var o=0;o<t;o++){var a=Math.floor(Math.random()*r.length),l=r[a];r.splice(a,1);var d=function(e){return[Math.floor(e/9),e%9]}(l),c=d[0],s=d[1];e[c][s]=0}return e}(function(){for(var e=[],n=0;n<9;n++){e[n]=[];for(var t=0;t<9;t++)e[n][t]=0}for(var r=0;r<3;r++)!function(e,n,t){for(var r=e%3,i=e>6?2:e>3?1:0,o=0;o<n.length;o++)for(var a=0;a<n[o].length;a++)t[3*i+o][3*r+a]=n[o][a]}(4*r,function(){for(var e=new Array,n=[1,2,3,4,5,6,7,8,9],t=0;t<3;t++){e[t]=new Array;for(var r=0;r<3;r++){var i=Math.floor(Math.random()*n.length),o=n[i];n.splice(i,1),e[t][r]=o}}return e}(),e);return y(e),e}(),e),t=h(n);V.originalGrid=h(n),V.numbersGrid=t,V.isEditableGrid=function(e){for(var n=0;n<9;n++)for(var t=0;t<9;t++)0==e[n][t]?e[n][t]=!0:e[n][t]=!1;return e}(n),"undefined"!=typeof localStorage?(localStorage.setItem("numbersGrid",JSON.stringify(V.numbersGrid)),localStorage.setItem("editableGrid",JSON.stringify(V.isEditableGrid)),localStorage.setItem("originalGrid",JSON.stringify(V.originalGrid))):Console.log("Sorry, I can not use your local storage, please allow it.");G(t)}(e),V.writeGridToView()}function n(){S.style.display="flex",L.style.display="none",B.style.display="flex",J=!1,V.isSolved=!1,D.innerText="Solve",o(),function(){for(var e=[],n=[],t=0;t<9;t++){e[t]=[],n[t]=[];for(var r=0;r<9;r++)n[t][r]=0,e[t][r]=!0}V.numbersGrid=n,V.isEditableGrid=e,G(n)}(),V.writeGridToView()}function t(e){for(var n=0;n<9;n++)for(var t=0;t<9;t++){var r=document.getElementById(n+"_"+t);e[n][t]>0?r.innerText=e[n][t]:r.innerText=""}}function r(e){e.style.display="none"}function i(e){e.style.display="flex"}function o(){!function(){for(;p.firstChild;)p.removeChild(p.firstChild)}(),a(),l(R.gridDimension,R.playgroundHeight);for(var e=function(e){for(var n=function(n){var t=document.createElement("div");t.classList.add("sudokuCell"),R.canHover&&t.classList.add("canHover"),d(t,R.cellDimension),function(e,n){var t=!1;t=e>=0&&e<3||e>5&&e<9?n>=0&&n<3||n>5&&n<9:n>2&&n<6;return t}(e,n)&&t.classList.add("darkerCellBg"),t.id=e+"_"+n,p.appendChild(t),t.addEventListener("click",function(){V.clickedRow=e,V.clickedColumn=n,V.isEditableGrid[e][n]&&(!function(e,n,t){for(var r=u(e,t),i=f(n,t),o=m(e,n,t),a=s(s(r,i),o),l=1;l<10;l++){var d=document.getElementById("modalNumber_"+l);a.length>0&&a.indexOf(l)>=0||t[e][n]==l?(d.classList.remove("notClickableModalNumber"),z.numberStateArray[l]=!0):(d.classList.add("notClickableModalNumber"),z.numberStateArray[l]=!1)}}(e,n,V.numbersGrid),i(I))})},t=0;t<9;t++)n(t)},n=0;n<9;n++)e(n)}function a(){var e=window.innerWidth-50,n=window.innerHeight-S.offsetTop-w.clientHeight-20,t=Math.min(e,n),r=Math.floor(t/9);R.cellDimension=r,R.gridDimension=9*r,R.playgroundHeight=n}function l(e,n){p.style.width=e+"px",S.style.width=e+"px",k.style.width=e+"px",S.style.height=n+"px"}function d(e,n){e.style.width=n+"px",e.style.height=n+"px",e.style.fontSize=n<25?"10px":n<40?"20px":n<50?"28px":"40px"}function c(e,n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}function s(e,n){var t=e.slice(0),r=n.slice(0);return t&&r?t.filter(function(e){return r.indexOf(e)>=0}):0}function u(e,n){for(var t=[1,2,3,4,5,6,7,8,9],r=1;r<10;r++)n[e].indexOf(r)>=0&&c(t,r);return t}function f(e,n){for(var t=[1,2,3,4,5,6,7,8,9],r=0;r<9;r++)n[r][e]>0&&c(t,n[r][e]);return t}function m(e,n,t){for(var r=[1,2,3,4,5,6,7,8,9],i=e-e%3,o=n-n%3,a=i;a<i+3;a++)for(var l=o;l<o+3;l++)t[a][l]>0&&c(r,t[a][l]);return r}function g(e){for(var n=[],t=0;t<9;t++){n[t]=[];for(var r=0;r<9;r++)if(0==e[t][r]){var i=u(t,e),o=f(r,e),a=m(t,r,e),l=s(s(i,o),a);!function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),r=e[n];e[n]=e[t],e[t]=r}}(l),n[t][r]=l}else n[t][r]=0}return n}function v(e,n,t,r){return!!(function(e,n,t){return!(n[e].indexOf(t)>=0)}(e,t,r)&&function(e,n,t){for(var r=0;r<n.length;r++)if(n[r][e]==t)return!1;return!0}(n,t,r)&&function(e,n,t,r){for(var i=e-e%3,o=n-n%3,a=i;a<i+3;a++)for(var l=o;l<o+3;l++)if(t[a][l]==r)return!1;return!0}(e,n,t,r))}function y(e){b(e,g(e))}function b(e,n){for(var t=0;t<9;t++)for(var r=0;r<9;r++)if(0==e[t][r]){for(var i=n[t][r],o=0;o<i.length;o++)if(v(t,r,e,i[o])){if(e[t][r]=i[o],b(e,n))return!0;e[t][r]=0}return!1}return!0}function h(e){for(var n=[],t=0;t<9;t++){n[t]=[];for(var r=0;r<9;r++)n[t][r]=e[t][r]}return n}function G(e){for(var n=0;n<9;n++)for(var t=0;t<9;t++)null===e[n][t]||0===e[n][t]?document.getElementById(n+"_"+t).classList.add("editableCell"):document.getElementById(n+"_"+t).classList.remove("editableCell")}console.log("DOM fully loaded and parsed");var S=document.getElementById("playground-container"),E=document.getElementsByClassName("nav-item"),p=document.getElementById("playgroundGrid"),w=(document.getElementById("navbar"),document.getElementById("controls-main-container")),k=document.getElementById("control-container"),I=document.getElementById("modal-number"),L=document.getElementById("control-container-play"),B=document.getElementById("control-container-solve"),x=document.getElementById("modal-newSudoku"),N=document.getElementById("newSudoku-btn"),C=document.getElementById("newSudoku-easy"),O=document.getElementById("newSudoku-medium"),M=document.getElementById("newSudoku-hard"),H=document.getElementById("solutionSudoku-btn"),D=document.getElementById("solveSudoku-btn"),J=(window.innerWidth,window.innerHeight,!1),T=45,A=36,_=28,R={cellDimension:60,gridDimension:540,playgroundHeight:600,canHover:!0},V={isEditableGrid:[],numbersGrid:[],originalGrid:[],updateGridNumber:function(e){this.numbersGrid[this.clickedRow][this.clickedColumn]=e,t(this.numbersGrid)},writeGridToView:function(){t(this.numbersGrid)},clickedRow:0,clickedColumn:0,isSolved:!1},z={numberStateArray:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],getNumberState:function(e){return this.numberStateArray[e]}},P=void 0;window.addEventListener("resize",function(){clearTimeout(P),P=setTimeout(function(){a(),l(R.gridDimension,R.playgroundHeight);for(var e=document.getElementsByClassName("sudokuCell"),n=0;n<e.length;n++)d(e[n],R.cellDimension)},200)}),I.addEventListener("click",function(e){e.target==I&&r(I)});for(var W=function(e){document.getElementById("modalNumber_"+e).addEventListener("click",function(){z.getNumberState(e)&&(V.updateGridNumber(e),J&&("undefined"!=typeof localStorage?(localStorage.setItem("numbersGrid",JSON.stringify(V.numbersGrid)),localStorage.setItem("editableGrid",JSON.stringify(V.isEditableGrid)),localStorage.setItem("originalGrid",JSON.stringify(V.originalGrid))):Console.log("Sorry, I can not use your local storage, please allow it.")),r(I))})},j=0;j<10;j++)W(j);N.addEventListener("click",function(){i(x)}),x.addEventListener("click",function(e){e.target==x&&r(x)}),C.addEventListener("click",function(){e(T,!1),r(x)}),O.addEventListener("click",function(){e(A,!1),r(x)}),M.addEventListener("click",function(){e(_,!1),r(x)}),H.addEventListener("click",function(){y(V.originalGrid),t(V.originalGrid),V.numbersGrid=V.originalGrid}),D.addEventListener("click",function(){V.isSolved?n():(V.isSolved=!0,y(V.numbersGrid),t(V.numbersGrid),D.innerText="New grid")}),document.addEventListener("touchstart",function(){R.canHover=!1;for(var e=document.getElementsByClassName("sudokuCell"),n=0;n<e.length;n++)e[n].classList.remove("canHover")});var q=function(t){E[t].classList.contains("active")&&e(T,!0),E[t].addEventListener("click",function(){if(!E[t].classList.contains("active")){switch(document.getElementsByClassName("active")[0].classList.remove("active"),E[t].classList.add("active"),E[t].id){case"navPlay":e(T,!0);break;case"navSolve":n();break;case"navPrint":L.style.display="none",B.style.display="none",S.style.display="none"}}})};for(j=0;j<E.length;j++)q(j)});